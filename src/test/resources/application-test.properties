# Test configuration for arda-shared-kernel
# Uses in-memory H2 database for testing

# Disable auto-configurations that require external services
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\
  org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\
  vn.io.arda.shared.config.MultiTenancyAutoConfiguration

# JPA/Hibernate configuration for H2
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Disable Liquibase (no changelog files in test environment)
spring.liquibase.enabled=false

# Disable multi-tenancy for basic context load test
# (Multi-tenancy requires tenant metadata which isn't available in unit tests)
arda.shared.multi-tenancy.enabled=false

# Disable event bus (no Kafka in test environment)
arda.shared.event-bus.enabled=false

# Disable caching (no Redis in test environment)
arda.shared.caching.enabled=false

# Enable exception handler for testing
arda.shared.exception-handler.enabled=true

# Allow bean definition overriding for test mocks
spring.main.allow-bean-definition-overriding=true

# Logging
logging.level.vn.io.arda.shared=INFO
logging.level.org.hibernate.SQL=ERROR
